<a href="#" onclick="login()">
  <i class="icon-facebook-sign"></i> login
</a>
<%= render_modal "Iniciando session","login" do %>
    <h2>Iniciando session</h2>
    <p>Por favor espera unos segundos</p>
<% end %>
<script>

    function login() {
        FB.login(function(response) {


            if (response.authResponse) {
                FB.api('/me', function(resp) {
                    $('#modallogin').modal('show');
                    var uid = resp.id;
                    var name = resp.first_name;
                    var email = resp.email;
                    if (resp!=null){
                        $.post('client_auth',{uid: uid, name: name, email: email}, function(){

                        }).done(function() {  window.location = '/me';; });
                    }
                });
            } else {
                alert("Login failed");
            }
        },{scope: 'email'});
    }

</script>
